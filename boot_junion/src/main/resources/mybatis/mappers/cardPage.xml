<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.DAO.CardPageDAO">

	<select id="cardPageList" resultType="com.boot.DTO.ComNoticeDTO">
<!-- 	페이징을 위한 쿼리 -->
	<![CDATA[ 
	select row_noticeNum, notice_num, notice_title, aa.com_name, notice_area1, notice_area2, notice_career 
		FROM(select row_noticeNum, notice_num, notice_title, a.com_name, notice_area1, notice_area2, notice_career 
			FROM(select row_number() over(order by notice_num desc) as row_noticeNum , notice_num, notice_title, 
					c.com_name, notice_area1 , notice_area2, notice_career 
				FROM notice_tb n join com_tb c on n.com_email = c.com_email 
				where notice_endDate >= now()
				order by notice_num desc) a 
			where row_noticeNum<= (#{pageNum} * #{amount}) )aa where row_noticeNum > (#{pageNum}-1)* #{amount}
	]]>
<!--	24.08.01 : 마감된 공고는 제외하고 검색되도록 수정-->
</select>


</mapper>


